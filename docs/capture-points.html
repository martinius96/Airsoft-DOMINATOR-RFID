<!DOCTYPE html>
<html lang="sk-SK">
<head>
	<!-- Primary Meta Tags -->
	<title>WiFi body nRF24L01 + Arduino pre Airsoft | Paintball</title>
	<meta name="title" content="WiFi body - Airsoft | Paintball">
	<meta name="description" content="WiFi body pre Airsoft, Paintball. Herný režim Capture points, body komunikujúce až na 1100 metrov.">
	<link rel="icon" type="image/png" href="https://martinius96.github.io/termostat-ethernet/favicon.png">
	<link rel="sitemap" type="application/xml" title="Sitemap" href="sitemap.xml" />
	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://martinius96.github.io/Airsoft-DOMINATOR-RFID/capture-points.html">
	<meta property="og:title" content="WiFi body - Airsoft | Paintball">
	<meta property="og:description" content="WiFi body pre Airsoft, Paintball. Herný režim Capture points, body komunikujúce až na 1100 metrov.">
	<meta property="og:image" content="">

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://martinius96.github.io/Airsoft-DOMINATOR-RFID/capture-points.html">
	<meta property="twitter:title" content="WiFi body - Airsoft | Paintball">
	<meta property="twitter:description" content="WiFi body pre Airsoft, Paintball. Herný režim Capture points, body komunikujúce až na 1100 metrov.">
	<meta property="twitter:image" content="">
	
	<meta name="google-site-verification" content="UwZZh2EXv3iWUAi_1Z0hLxVCz6ySJ4UdY_BPoLtejwo" />    	
	<meta property='fb:admins' content='100001242570317'>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript">
    		window.smartlook||(function(d) {
    			var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
    			var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
    			c.charset='utf-8';c.src='https://rec.smartlook.com/recorder.js';h.appendChild(c);
    		})(document);
    		smartlook('init', 'db50efe9fff280a17db52b82be221240cbbd3dbe');
	</script>    
<style>

.aa_h2{
  font:100 5rem/1 Roboto;
  text-transform: uppercase;
}
table{
   background: #fff;
}
table,thead,tbody,tfoot,tr, td,th{
  text-align: center;
  margin: auto;
  border:1px solid #dedede;
  padding: 1rem;
  width: 50%;
}
.table    { display: table; width: 100%; }
.tr       { display: table-row;  }
.thead    { display: table-header-group }
.tbody    { display: table-row-group }
.tfoot    { display: table-footer-group }
.col      { display: table-column }
.colgroup { display: table-column-group }
.td, .th   { display: table-cell; width: 50%; }
.caption  { display: table-caption }

.table,
.thead,
.tbody,
.tfoot,
.tr,
.td,
.th{
  text-align: center;
  margin: auto;
  padding: 1rem;
}
.table{
  background: #fff;
  margin: auto;
  border:none;
  padding: 0;
}

.th{
  font-weight: 700;
  border:1px solid #dedede;
  &:nth-child(odd){
    border-right:none;
  }
}
.td{
  font-weight: 300;
  border:1px solid #dedede;
  border-top:none;
  &:nth-child(odd){
    border-right:none;
  }
}

.aa_htmlTable{
  background: tomato;
  padding: 5rem;
  display: table;
  width: 100%;
  height: 100vh;
  vertical-align: middle;
}
.aa_css{
  background: skyblue;
  padding: 5rem;
  display: table;
  width: 100%;
  height: 100vh;
  vertical-align: middle;
}

.aa_ahmadawais{
  display: table;
  width: 100%;
  font: 100 1.2rem/2 Roboto;
  margin: 5rem auto;
}
    
  </style>
</head>
<body>
	<div class="container">
		<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <ul class="nav navbar-nav">
      	<li><a href="index.html">RFID DOMINATOR</a></li>
<li><a href="dominator-encoder.html">Konfigurovateľný DOMINATOR</a></li>
<li class=""><a href="button-dominator.html">Tlačidlový DOMINATOR</a></li> 
<li class="active"><a href="capture-points.html">WiFi body</a></li>
<a href="capture-points.html"><img src="https://futbalovysen.sk/wp-content/uploads/slovakia.png" alt="Slovak flag.png, 2,2kB" title="Slovakia" height="32" width="32"></a>
<a href="de/capture-points.html"><img src="https://futbalovysen.sk/wp-content/uploads/germany.png" alt="Germany.png, 2,2kB" title="Germany" height="32" width="32"></a>
<a href="ru/capture-points.html"><img src="https://futbalovysen.sk/wp-content/uploads/russia.png" alt="russia.png, 2,2kB" title="Russia" height="32" width="32"></a>	
<a href="en/capture-points.html"><img src="https://i2.wp.com/facsusa.com/wp-content/uploads/2017/05/Flag-of-England.png?ssl=1" alt="English.png, 2,2kB" title="English" height="32" width="32"></a>
<!---
<a href="it/capture-points.html"><img src="https://www.flaticon.com/premium-icon/icons/svg/3015/3015784.svg" alt="Italy.png, 2,2kB" title="Italy" height="32" width="32"></a>
<a href="da/capture-points.html"><img src="https://image.flaticon.com/icons/svg/555/555607.svg" alt="Danish.png, 2,2kB" title="Danish" height="32" width="32"></a>	    			    
--->
</div>
</nav>  
  		<div class="row">
    			<div class="col-sm-12">
<div class="alert alert-success">
	<strong>Repozitár s testovacími programovými implementáciami pre Airsoft body: </strong><a href="https://github.com/martinius96/Capture_Points_Arduino_nRF24L01_Airsoft_Paintball">Airsoft - WiFi body - Arduino</a>
</div>	
<div class="alert alert-info">
	<strong>Pri záujme o kúpu firmvéru pre WiFi body kontaktujte na:</strong> martinius96@gmail.com
</div>					
<span class="label label-default">Arduino</span>
<span class="label label-primary">LCD</span>
<span class="label label-success">WiFi</span>
<span class="label label-info">Stopky</span>
<span class="label label-warning">Schéma</span>
<span class="label label-danger">Tlačidlo</span>
<span class="label label-default">Capture Points</span>
<span class="label label-primary">Paintball</span>
<span class="label label-success">DOMINATOR</span>
<hr><center><h2>WiFi body pre Airsoft | Paintball</h2></center><hr>
<h4>Entity v projekte WiFi body:</h4>
 <div class="row">
  <div class="col-sm-6"><center><img src="https://i.imgur.com/2uGic8e.png" width="128px" height="128px" style="border-radius: 50%;" alt="Tím RED - tlačidlo pre používateľský vstup" title="Tím RED - tlačidlo pre používateľský vstup"><br><b>Tím RED</b></center></div>
  <div class="col-sm-6"><center><img src="https://i.imgur.com/bBzcrj0.png" width="128px" height="128px" style="border-radius: 50%;" alt="Tím GRE - tlačidlo pre používateľský vstup" title="Tím GRE - tlačidlo pre používateľský vstup"><br><b>Tím GRE</b></center></div>
</div>
<h4>Popis projektu WiFi body:</h4>
<p style="text-align: justify;">
Herný režim Capture Points pre športy Airsoft, Paintball.
Body medzi sebou komunikujú prostredníctvom WiFi modulov z rady nRF24L01, pričom si medzi sebou vymieňajú informácie o stave bodu (či je obsadený a akým tímom).
Jeden bod je permanentný vysielač a vyžaduje komunikáciu od druhého bodu. Druhý bod je prijímačom a odpovedá na prijatie dát vysielaču, tým sa zamedzuje kolíziám pri komunikácii na WiFi frekvencii 2.4 GHz.
Každý z bodov využíva riadiaci mikrokontróler Arduino (Arduino Uno / Nano), prípadne samostatný čip (Atmel) AtMega328P, ktorý ovláda celú logiku systému.
V hre sú 2 tímy - <b><font color="#C0392B">RED tím</font></b> a <b><font color="#27AE60">GRE tím</font></b>, ktoré proti sebe hrajú a snažia sa obsadiť oba body stlačením príslušného tlačidla.				
Tlačidlový vstup indikuje akciu obsadenia bodu členom tímu RED, alebo GRE.
Využívajú sa spínacie tlačidlá zapojené v režime INPUT_PULLUP.
Stlačením tlačidla sa privedie GND signál na vstupný digitálny vývod Arduina (Active-LOW spínací signál).	
Dĺžka stlačenia / počet stlačení sa neovuje a nie je konfigurovateľný. Bod reaguje okamžite na stlačenie tlačidla.
Hra sa končí v momente, kedy sú obsadené oba body rovnakým tímom.
Zmenu na bode indikuje hlásič, pri konci hry oba hlásiče pípajú v nekonečnej slučke a zároveň sa preruší WiFi komunikácia medzi modulmi nRF24L01.
WiFi moduly nRF24l01 komunikujú na 2,4 GHz. nRF24l01 (bez + PA + LNA) komunikujú na cca 70 metrov, nRF24l01 + PA + LNA aj na kilometer, respektíve v lese a inak zarušenom prostredí na úrovni 450-700 metrov pri maximálnom vysielacom výkone. 
Pri externom napájaní je nutné použiť adaptér YL-s 3.3V prevodníkom a napájať cez externý adaptér.  
Nepoužívať 5V napájanie z Arduina, hrozí zničenie regulátora, rovnako tak ani 3V3 vývod nie je vhodný pre napájanie modulu, nakoľko má vysoký prúdový odber vo výkonnejších vysielacích režimoch. 
Reštart oboch bodov prebieha za pomoci reset tlačidla Arduín, alebo vytiahnutím a pripojením napájania (power-on cyklus).
</p>
<div class="alert alert-info">
  <strong>Bezdrôtové moduly komunikujú na 2.4GHz, nie je to technológia WiFi, nevyžadujú router, alebo prístupový bod!</strong> Moduly majú vlastný komunikačný kanál s možnosťou voľby až 140 kanálov.
</div>
<h4>Podporované rýchlosti modulov nRF24L01:</h4> 
<li>250 kbps - <font color="red"><b>u starších nRF24L01 nie je táto možnosť podporovaná!</b></font></li>
<li>1 Mbps</li>
<li>2 Mbps</li>
<h4>Výkonové režimy modulov nRF24L01:</h4> 
<li>RF24_PA_MIN=-18dBm</li> 
<li>RF24_PA_LOW=-12dBm</li>
<li>RF24_PA_MED=-6dBM</li>
<li>RF24_PA_HIGH=0dBm</li>
<h4>Bloková schéma - WiFi body - Airsoft:</h4>
<center><img src="https://i.imgur.com/hglnwgX.jpg" style="display: block; max-width: 100%; height: auto;" alt="Bloková schéma / Block scheme - Capture Points - Airsoft / Paintball, Arduino, nRF24L01" title="Bloková schéma / Block scheme - Capture Points - Airsoft / Paintball, Arduino, nRF24L01"></center>	
<hr><h4>Kompatibilný riadiaci hardvér pre WiFi Airsoft body:</h4><hr>
<div class="row">
<div class="col-sm-3"><center><img src="https://i.imgur.com/wtnzKqO.png" width="128px" height="128px" style="border-radius: 50%;" alt="Riadiaci mikrokontróler Arduino UNO" title="Riadiaci mikrokontróler Arduino UNO"><br><b><a href="https://www.gme.sk/klon-arduino-uno-r3-atmega328p-ch340-mini-usb">Arduino UNO</a></b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/XHC8DBe.png" width="128px" height="128px" style="border-radius: 50%;" alt="Riadiaci mikrokontróler Arduino Nano" title="Riadiaci mikrokontróler Arduino Nano"><br><b><a href="https://www.gme.sk/klon-arduino-nano-v3-0-r3-ch340g">Arduino Nano</a></b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/4xX0BoE.png" width="128px" height="128px" style="border-radius: 50%;" alt="Riadiaci mikrokontróler AtMega328P DIP" title="Riadiaci mikrokontróler AtMega328P DIP"><br><b><a href="https://www.gme.sk/atmega328p-pu-sdip28-atmel">AtMega328P - DIP28</a></b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/FANTMuW.png" width="128px" height="128px" style="border-radius: 50%;" alt="Riadiaci mikrokontróler AtMega328P SMD" title="Riadiaci mikrokontróler AtMega328P SMD"><br><b><a href="https://www.gme.sk/atmega328p-au-tqfp32-atmel">AtMega328P - SMD</a></b></center></div>
</div>	
<hr><h4>Periférie pre WiFi Airsoft body:</h4><hr>
<div class="row">
<div class="col-sm-3"><center><img src="https://i.imgur.com/1cykMkD.png" width="128px" height="128px" style="border-radius: 50%;" alt="2x WiFi modul nRF24L01 / nRF24L01 + PA + LNA" title="2x WiFi modul nRF24L01 / nRF24L01 + PA + LNA"><br><b>2x WiFi modul nRF24L01 / nRF24L01 + PA + LNA</b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/9P3aF98.png" width="128px" height="128px" style="border-radius: 50%;" alt="Spínacie tlačidlo (pushbutton)" title="Spínacie tlačidlo (pushbutton)"><br><b>4x spínacie tlačidlo (pushbutton)</b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/HPRdfXo.png" width="128px" height="128px" style="border-radius: 50%;" alt="Hlásič" title="Hlásič"><br><b>2x Hlásič</b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/OxaPuBN.png" width="128px" height="128px" style="border-radius: 50%;" alt="2x LED diódy" title="2x LED diódy"><br><b>4x LED diódy</b></center></div>
</div>
<hr><center><h3>Schéma zapojenia - WiFi body</h3></center><hr>
<center><img src="https://i.imgur.com/noWoy6S.png" style="display: block; max-width: 100%; height: auto;" alt="WiFi body - DOMINATOR - schéma zapojenia - Arduino / Airsoft, stopwatch, DOMINATION" title="WiFi body - - schéma zapojenia - Arduino / Airsoft, stopwatch, DOMINATION"></center>        			
<hr><center><h3>WiFi body - testovacie zapojenie</h3></center><hr>
<center><img src="https://i.imgur.com/bx6mj2V.png" style="display: block; max-width: 100%; height: auto;" alt="WiFi body - - Arduino pre Airsoft, Paintball" title="WiFi body - - Arduino pre Airsoft, Paintball"></center>        			
<hr><h3>WiFi body - Capture Points - Ukážka funkčnosti:</h3><hr>
<center><iframe width="80%" height="315" src="https://www.youtube.com/embed/SFTyy0cOauU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center>
<h3>Tabuľkové zapojenie vývodov - WiFi body - plne odpovedá schéme zapojenia:</h3>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>		
<tr>
<td align="left" style="background-color:#C0392B"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#C0392B">nRF24L01<strong></strong></td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">GND</td>
<td align="right" style="background-color:#C0392B">GND</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">3V3 / externý zdroj</td>
<td align="right" style="background-color:#C0392B">Vcc</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">D3</td>
<td align="right" style="background-color:#C0392B">CSN</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">D4</td>
<td align="right" style="background-color:#C0392B">CE</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">D11</td>
<td align="right" style="background-color:#C0392B">MOSI</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">D12</td>
<td align="right" style="background-color:#C0392B">MISO</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">D13</td>
<td align="right" style="background-color:#C0392B">SCK</td>
</tr>
<tr>
<td align="left" style="background-color:#F8C471"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#F8C471"><strong>LED diódy</strong></td>
</tr>
<tr>
<td align="left" style="background-color:#F8C471">GND</td>
<td align="right" style="background-color:#F8C471">GND</td>
</tr>
<tr>
<td align="left" style="background-color:#F8C471">D7</td>
<td align="right" style="background-color:#F8C471">IN (RED)</td>
</tr>
<tr>
<td align="left" style="background-color:#F8C471">D8</td>
<td align="right" style="background-color:#F8C471">IN (GREEN)</td>
</tr>
<td align="left" style="background-color:#5DADE2"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#5DADE2"><strong>Tlačidlá (INPUT_PULLUP)</strong></td>
</tr>
<tr>
<td align="left" style="background-color:#5DADE2">GND</td>
<td align="right" style="background-color:#5DADE2">GND</td>
</tr>
<tr>
<td align="left" style="background-color:#5DADE2">D5</td>
<td align="right" style="background-color:#5DADE2">IN (RED)</td>
</tr>
<tr>
<td align="left" style="background-color:#5DADE2">D6</td>
<td align="right" style="background-color:#5DADE2">IN (GRE)</td>
</tr>
<td align="left" style="background-color:#AF7AC5"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#AF7AC5"><strong>Buzzer</strong></td>
</tr>
<tr>
<td align="left" style="background-color:#AF7AC5">D2</td>
<td align="right" style="background-color:#AF7AC5">IO</td>
</tr>
<tr>
<td align="left" style="background-color:#AF7AC5">GND</td>
<td align="right" style="background-color:#AF7AC5">GND</td>
</tr>
</tbody>
</table>				</div>
<hr><center><h2>Testovací program - WiFi body</h2></center><hr>
<p style="text-align: justify;">
Cieľom testovacieho programu je otestovať kompatibilitu hardvéru (verzie nRF24L01 modulov s prenosovou rýchlosťou 250kbps, nakoľko ju nie všetky podporujú).
Test a realizácia spojenia medzi vysielačom a prijímačom s callbackom prijímača, ktorý vráti vysielaču odoslané dáta.
Prijímač má integrovaný buzzer, ktorý pípa v prípade, že zaznamená určité dáta - oznamuje tak, že existuje spojenie s vysielačom a dáta tečú.
Tester je vhodné používať aj v Airsoft hre pre prvotné otestovanie dosahu a komunikácie medzi oboma uzlami.
Vysielač vysiela vždy, prijímač iba ako odpoveď vysielaču po prijatí dát.
Možno prenášať rôzne dáta v štruktúre, väčšie pakety. 
</p>
<h3><font color="#2ECC71">Tester pre vysielač</font> <font color="red">(Toto nie je program pre Airsoft WiFi projekt! - Projekt je platený)</font></h3>					   
<pre style="background: #2ECC71;">
//nRF24L01 + PA + LNA - Transmitter tester
//Author: Martin Chlebovec (martinius96)
//Web: https://arduino.php5.sk
//Donate: https://paypal.me/chlebovec

#include &lt;SPI.h>
#include "RF24.h"
// nastavení propojovacích pinů
#define CE 4
#define CS 3
// inicializace nRF s piny CE a CS
RF24 nRF(CE, CS);
// nastavení adres pro přijímač a vysílač,
// musí být nastaveny stejně v obou programech!
byte adresaPrijimac[]= "prijimac00";
byte adresaVysilac[]= "vysilac00";
void setup() {
  // komunikace přes sériovou linku rychlostí 9600 baud
  Serial.begin(9600);
  // zapnutí komunikace nRF modulu
  nRF.begin();
  nRF.setDataRate( RF24_250KBPS );
  // nastavení výkonu nRF modulu,
  // možnosti jsou RF24_PA_MIN, RF24_PA_LOW, RF24_PA_HIGH and RF24_PA_MAX,
  // pro HIGH a MAX je nutnýv externí 3,3V zdroj
  nRF.setPALevel(RF24_PA_LOW);
  // nastavení zapisovacího a čtecího kanálu
  nRF.openWritingPipe(adresaVysilac);
  nRF.openReadingPipe(1,adresaPrijimac);
  // začátek příjmu dat
  nRF.startListening();
}

void loop() {
  // for smyčka pro postupné odeslání
  // hodnot 0 až 3 pro načtení všech dat
  // z přijímače
  for (int i=0; i &lt; 4; i++ ) {
    // ukončení příjmu dat
    nRF.stopListening();
    // vytisknutí aktuální volby po sériové lince
    Serial.print("Posilam volbu ");
    Serial.println(i);
    // uložení startovního času komunikace
    unsigned long casZacatek = micros();
    // odeslání aktuální volby, v případě selhání
    // vytištění chybové hlášky na sériovou linku
    if (!nRF.write( &i, sizeof(i) )){
       Serial.println("Chyba při odeslání!");
    }
    nRF.startListening();
    unsigned long casCekaniOdezvy = micros();
    boolean timeout = false;
    while ( ! nRF.available() ){
    if (micros() - casCekaniOdezvy > 200000 ){
          timeout = true;
          break;
      }      
    }
    if ( timeout ){
      Serial.println("Chyba při prijmu, vyprseni casu na odezvu!");
    }
    else{
     
        unsigned long prijataData;
        nRF.read( &prijataData, sizeof(prijataData) );
        unsigned long casKonec = micros();
        Serial.print("Odeslana volba: ");
        Serial.print(i);
        Serial.print(", prijata data: ");
        Serial.println(prijataData);
        Serial.print("Delka spojeni: ");
        Serial.print(casKonec - casZacatek);
        Serial.println(" mikrosekund.");
    }
    delay(200);
  }
}
</pre>   
<h3><font color="#CB4335">Prijímač tester</font> <font color="red">(Toto nie je program pre Airsoft WiFi projekt! - Projekt je platený)</font></h3>					   
<pre style="background: #CB4335;">
//nRF24L01 + PA + LNA - Receiver tester
//Author: Martin Chlebovec (martinius96)
//Web: https://arduino.php5.sk
//Donate: https://paypal.me/chlebovec

#include &lt;SPI.h>
#include "RF24.h"
int prijem;
const int buzzer = 2;
#define CE 4
#define CS 3
RF24 nRF(CE, CS);
byte adresaPrijimac[] = "prijimac00";
byte adresaVysilac[] = "vysilac00";
void setup() {
  Serial.begin(9600);
  pinMode(buzzer, OUTPUT);
  nRF.begin();
  nRF.setDataRate( RF24_250KBPS );
  nRF.setPALevel(RF24_PA_LOW);
  nRF.openWritingPipe(adresaPrijimac);
  nRF.openReadingPipe(1, adresaVysilac);
  nRF.startListening();
}

void loop() {
  unsigned long odezva;
  if ( nRF.available()) {
    // čekání na příjem dat
    while (nRF.available()) {
      nRF.read( &prijem, sizeof(prijem) );
    }
    Serial.print("Prijata volba: ");
    Serial.print(prijem);
    switch ( prijem ) {
      case 1:

        odezva = millis();

        tone(buzzer, 50, 500);

        break;
      case 2:
        odezva = millis() / 1000;
        break;
      case 3:
        odezva = micros();
        break;
      default:
        odezva = 0;
        break;
    }
    nRF.stopListening();
    nRF.write( &odezva, sizeof(odezva) );
    nRF.startListening();
  }
}
</pre>       



</div>
		</div>
</div>
</body>
</html>
