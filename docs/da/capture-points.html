<!DOCTYPE html>
<html lang="da">
<head>
	<!-- Primary Meta Tags -->
	<title>WiFi-organ - Airsoft | Paintball - Arduino + nRF24L01</title>
	<meta name="title" content="WiFi body - Airsoft | Paintball">
	<meta name="description" content="WiFi-point til Airsoft, Paintball. Optag point-spiltilstand, point, der kommunikerer op til 1100 meter.">
	<link rel="icon" type="image/png" href="https://martinius96.github.io/termostat-ethernet/favicon.png">
	<link rel="sitemap" type="application/xml" title="Sitemap" href="../sitemap.xml" />
	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://martinius96.github.io/Airsoft-DOMINATOR-RFID/da/capture-points.html">
	<meta property="og:title" content="WiFi-organ - Airsoft | Paintball - Arduino + nRF24L01">
	<meta property="og:description" content="WiFi-point til Airsoft, Paintball. Optag point-spiltilstand, point, der kommunikerer op til 1100 meter.">
	<meta property="og:image" content="">

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://martinius96.github.io/Airsoft-DOMINATOR-RFID/da/capture-points.html">
	<meta property="twitter:title" content="WiFi-organ - Airsoft | Paintball - Arduino + nRF24L01">
	<meta property="twitter:description" content="WiFi-point til Airsoft, Paintball. Optag point-spiltilstand, point, der kommunikerer op til 1100 meter.">
	<meta property="twitter:image" content="">
	
	<meta name="google-site-verification" content="UwZZh2EXv3iWUAi_1Z0hLxVCz6ySJ4UdY_BPoLtejwo" />    	
	<meta property='fb:admins' content='100001242570317'>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript">
    		window.smartlook||(function(d) {
    			var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
    			var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
    			c.charset='utf-8';c.src='https://rec.smartlook.com/recorder.js';h.appendChild(c);
    		})(document);
    		smartlook('init', 'db50efe9fff280a17db52b82be221240cbbd3dbe');
	</script>    
	<style>
		table td {
  			border: 1px solid black; 
		}
	</style>
</head>
<body>
	<div class="container">
		<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <ul class="nav navbar-nav">
      	<li><a href="index.html">RFID DOMINATOR</a></li>
<li><a href="dominator-encoder.html">Konfigurerbar DOMINATOR</a></li>
<li class=""><a href="button-dominator.html">Knap DOMINATOR</a></li> 
<li class="active"><a href="capture-points.html">WiFi-punkter</a></li>
<a href="../capture-points.html"><img src="https://www.flaticon.com/svg/static/icons/svg/299/299857.svg" alt="Slovak flag.png, 2,2kB" title="Slovakia" height="32" width="32"></a>
<a href="../de/capture-points.html"><img src="https://www.flaticon.com/svg/static/icons/svg/299/299786.svg" alt="Germany.png, 2,2kB" title="Germany" height="32" width="32"></a>
<a href="../ru/capture-points.html"><img src="https://www.flaticon.com/svg/static/icons/svg/299/299700.svg" alt="russia.png, 2,2kB" title="Russia" height="32" width="32"></a>	
<a href="../en/capture-points.html"><img src="https://www.flaticon.com/svg/static/icons/svg/299/299688.svg" alt="English.png, 2,2kB" title="English" height="32" width="32"></a>
<a href="../it/capture-points.html"><img src="https://www.flaticon.com/premium-icon/icons/svg/3015/3015784.svg" alt="Italy.png, 2,2kB" title="Italy" height="32" width="32"></a>	    			    
<a href="capture-points.html"><img src="https://image.flaticon.com/icons/svg/555/555607.svg" alt="Danish.png, 2,2kB" title="Danish" height="32" width="32"></a>
</div>
</nav>  
  		<div class="row">
    			<div class="col-sm-12">
<div class="alert alert-success">
	<strong>Datalager med implementering af testsoftware til Airsoft-punkter: </strong><a href="https://github.com/martinius96/Capture_Points_Arduino_nRF24L01_Airsoft_Paintball">Airsoft - WiFi-punkter - Arduino</a>
</div>	
<div class="alert alert-info">
	<strong>Hvis du er interesseret i at købe firmware til WiFi-punkter, skal du kontakte:</strong> martinius96@gmail.com
</div>					
<span class="label label-default">Arduino</span>
<span class="label label-primary">LCD</span>
<span class="label label-success">WiFi</span>
<span class="label label-info">Stopur</span>
<span class="label label-warning">Ordning</span>
<span class="label label-danger">Knap</span>
<span class="label label-default">Capture Points</span>
<span class="label label-primary">Paintball</span>
<span class="label label-success">DOMINATOR</span>
<hr><center><h2>WiFi-point til Airsoft Paintball</h2></center><hr>
<h4>Enheder i WiFi-point-projektet:</h4>
 <div class="row">
  <div class="col-sm-6"><center><img src="https://i.imgur.com/2uGic8e.png" width="128px" height="128px" style="border-radius: 50%;" alt="Tím RED - tlačidlo pre používateľský vstup" title="Tím RED - tlačidlo pre používateľský vstup"><br><b>Det RØDE hold</b></center></div>
  <div class="col-sm-6"><center><img src="https://i.imgur.com/bBzcrj0.png" width="128px" height="128px" style="border-radius: 50%;" alt="Tím GRE - tlačidlo pre používateľský vstup" title="Tím GRE - tlačidlo pre používateľský vstup"><br><b>Det GRE hold</b></center></div>
</div>
<h4>Projektbeskrivelse WiFi-punkter:</h4>
<p style="text-align: justify;">
Capture Points-spiltilstand til Airsoft og Paintball-sport.
Punkterne kommunikerer med hinanden via WiFi-moduler fra nRF24L01-serien, mens de udveksler oplysninger om punktets status (om det er optaget og af hvilket hold).
Det ene punkt er en permanent sender og kræver kommunikation fra det andet punkt. Det andet punkt er modtageren og reagerer på de data, der modtages af senderen, og undgår således kollisioner, når de kommunikerer på WiFi-frekvensen 2,4 GHz.
Hver af punkterne bruger en Arduino-kontrolmikrocontroller (Arduino Uno / Nano) eller en separat chip (Atmel) AtMega328P, som styrer hele systemets logik.
Der er 2 hold i spillet - <b><font color="#C0392B">RØDT hold</font></b> a <b><font color="#27AE60">GRE hold</font></b>der spiller mod hinanden og prøver at optage begge point ved at trykke på den relevante knap.
Knappens input angiver handlingen ved at besætte et punkt af et medlem af det RØDE eller GRE-hold.
De trykknapper, der er tilsluttet i tilstanden INPUT_PULLUP, bruges.
Ved at trykke på knappen føjes GND-signalet til Arduino digitale indgangsterminal (Active-LOW switch signal).
Trykvarighed / antal tryk styres ikke og kan ikke konfigureres. Punktet reagerer straks på et tryk på en knap.
Spillet slutter, når begge point er besat af det samme hold.
Ændringen i punktet er angivet af detektoren, i slutningen af spillet bipper begge detektorer i en endeløs sløjfe, og samtidig afbrydes WiFi-kommunikationen mellem nRF24L01-modulerne.
WiFi-moduler nRF24l01 kommunikerer ved 2,4 GHz. nRF24l01 (uden + PA + LNA) kommunikerer ved ca. 70 meter, nRF24l01 + PA + LNA også pr. kilometer, henholdsvis i skoven og ellers forstyrret miljø i niveauet 450-700 meter ved maksimal transmissionseffekt.
Til ekstern strømforsyning er det nødvendigt at bruge en YL-adapter med en 3,3 V konverter og strømforsyne den via en ekstern adapter.
Brug ikke en 5V strømforsyning fra Arduino, der er en risiko for at ødelægge controlleren, ligesom 3V3-terminalen ikke er egnet til strømforsyning til modulet, da den har et højt strømforbrug i kraftigere transmissionstilstande.
Genstart af begge punkter udføres ved at nulstille Arduín-knappen eller ved at trække ud og tilslutte strømforsyningen (start-cyklus).
</p>
<div class="alert alert-info">
  <strong>Trådløse moduler kommunikerer ved 2,4 GHz, det er ikke WiFi-teknologi, de kræver ikke en router eller et adgangspunkt!</strong> Modulerne har deres egen kommunikationskanal med et valg mellem op til 140 kanaler.
</div>
<h4>Understøttede modulhastigheder nRF24L01:</h4> 
<li>250 kbps - <font color="red"><b>denne mulighed understøttes ikke til ældre nRF24L01!</b></font></li>
<li>1 Mbps</li>
<li>2 Mbps</li>
<h4>Effekttilstande for nRF24L01-moduler:</h4> 
<li>RF24_PA_MIN=-18dBm</li> 
<li>RF24_PA_LOW=-12dBm</li>
<li>RF24_PA_MED=-6dBM</li>
<li>RF24_PA_HIGH=0dBm</li>
<h4>Blokdiagram - WiFi-punkter - Airsoft:</h4>
<center><img src="https://i.imgur.com/hglnwgX.jpg" style="display: block; max-width: 100%; height: auto;" alt="Bloková schéma / Block scheme - Capture Points - Airsoft / Paintball, Arduino, nRF24L01" title="Bloková schéma / Block scheme - Capture Points - Airsoft / Paintball, Arduino, nRF24L01"></center>	
<h4>Hardware til projektet - WiFi-punkter:</h4> 
<li><b>2x Arduino Uno / Nano / AtMega328P</b><img src="https://s3-ap-northeast-1.amazonaws.com/switch-science-intl/contents/small/789_201602_102_tBuTiHx.jpg" alt="Arduino Uno/Nano" title="Arduino Uno/Nano" style="display: block; width: 128px; height: 128px; border-radius: 50%;"></li>
<li><b>2x WiFi modul nRF24L01 / nRF24L01 + PA + LNA</b><img src="https://i.imgur.com/1cykMkD.png" alt="nRF24L01 / nRF24L01 + PA + LNA" title="nRF24L01 / nRF24L01 + PA + LNA0" style="display: block; width: 128px; height: 128px; border-radius: 50%;"></li>
<li><b>2x Summer</b><img src="https://i.imgur.com/HPRdfXo.png" alt="Hlásič priloženia karty" title="Hlásič priloženia karty" style="display: block; width: 128px; height: 128px; border-radius: 50%;"></li>
<li><b>2x LED dioder</b><img src="https://www.leds-manufacturer.com/PIC/2010114205637734_1.jpg" alt="LED diódy - indikátor aktívneho tímu na bode" title="LED diódy - indikátor aktívneho tímu na bode" style="display: block; width: 128px; height: 128px; border-radius: 50%;"></li>
<li><b>2x knap (pushbutton)</b><img src="https://i.imgur.com/9P3aF98.png" alt="LED diódy - indikátor aktívneho tímu na bode" title="LED diódy - indikátor aktívneho tímu na bode" style="display: block; width: 128px; height: 128px; border-radius: 50%;"></li>
<hr><center><h3>Ledningsdiagram - WiFi-punkter</h3></center><hr>
<center><img src="https://i.imgur.com/noWoy6S.png" style="display: block; max-width: 100%; height: auto;" alt="WiFi body - DOMINATOR - schéma zapojenia - Arduino / Airsoft, stopwatch, DOMINATION" title="WiFi body - - schéma zapojenia - Arduino / Airsoft, stopwatch, DOMINATION"></center>        			
<hr><center><h3>WiFi-punkter - testforbindelse</h3></center><hr>
<center><img src="https://i.imgur.com/bx6mj2V.png" style="display: block; max-width: 100%; height: auto;" alt="WiFi body - - Arduino pre Airsoft, Paintball" title="WiFi body - - Arduino pre Airsoft, Paintball"></center>        			
<hr><h3>WiFi-punkter - Capture Points - Demonstration af funktionalitet:</h3><hr>
<center><iframe width="80%" height="315" src="https://www.youtube.com/embed/SFTyy0cOauU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center>
<h3>Ledningsføring af terminaler - WiFi-punkter - svarer fuldt ud til ledningsdiagrammet:</h3>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>		
<tr>
<td align="left" style="background-color:#C0392B"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#C0392B">nRF24L01<strong></strong></td>
</tr>
<tr>
<td align="left">GND</td>
<td align="right">GND</td>
</tr>
<tr>
<td align="left">3V3 / ekstern kilde</td>
<td align="right">Vcc</td>
</tr>
<tr>
<td align="left">D3</td>
<td align="right">CSN</td>
</tr>
<tr>
<td align="left">D4</td>
<td align="right">CE</td>
</tr>
<tr>
<td align="left">D11</td>
<td align="right">MOSI</td>
</tr>
<tr>
<td align="left">D12</td>
<td align="right">MISO</td>
</tr>
<tr>
<td align="left">D13</td>
<td align="right">SCK</td>
</tr>
<tr>
<td align="left" style="background-color:#F8C471"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#F8C471"><strong>LED dioder</strong></td>
</tr>
<tr>
<td align="left">GND</td>
<td align="right">GND</td>
</tr>
<tr>
<td align="left">D7</td>
<td align="right">IN (RED)</td>
</tr>
<tr>
<td align="left">D8</td>
<td align="right">IN (GREEN)</td>
</tr>
<td align="left" style="background-color:#5DADE2"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#5DADE2"><strong>Knap (INPUT_PULLUP)</strong></td>
</tr>
<tr>
<td align="left">GND</td>
<td align="right">GND</td>
</tr>
<tr>
<td align="left">D5</td>
<td align="right">IN (RED)</td>
</tr>
<tr>
<td align="left">D6</td>
<td align="right">IN (GRE)</td>
</tr>
<td align="left" style="background-color:#AF7AC5"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#AF7AC5"><strong>Summer</strong></td>
</tr>
<tr>
<td align="left">D2</td>
<td align="right">IO</td>
</tr>
<tr>
<td align="left">GND</td>
<td align="right">GND</td>
</tr>
</tbody>
</table>				</div>
<hr> <center> <h2> Testprogram - WiFi-punkter </h2> </center> <hr>
<p style="text-align: justify;">
Målet med testprogrammet er at teste hardwareens kompatibilitet (versioner af nRF24L01-moduler med en overførselshastighed på 250 kbps, da ikke alle understøtter det).
Test og implementer en forbindelse mellem senderen og modtageren med en tilbagekaldelse af modtageren, som returnerer de data, der sendes til senderen.
Modtageren har en integreret summer, der bipper, når den registrerer bestemte data - det indikerer, at der er en forbindelse til senderen, og dataene flyder.
Testeren er også velegnet til brug i Airsoft-spillet til den indledende test af rækkevidden og kommunikationen mellem de to noder.
Senderen sender altid, modtageren kun som svar på senderen efter modtagelse af dataene.
Det er muligt at overføre forskellige data i strukturen, større pakker.
</p>
<h3><font color="#2ECC71">Sendertesteren</font> <font color="red">(Dette er ikke et program til Airsoft WiFi-projektet! - Projektet er betalt)</font></h3>					   
<pre style="background: #2ECC71;">
//nRF24L01 + PA + LNA - Transmitter tester
//Author: Martin Chlebovec (martinius96)
//Web: https://arduino.php5.sk
//Donate: https://paypal.me/chlebovec

#include &lt;SPI.h>
#include "RF24.h"
// nastavení propojovacích pinů
#define CE 4
#define CS 3
// inicializace nRF s piny CE a CS
RF24 nRF(CE, CS);
// nastavení adres pro přijímač a vysílač,
// musí být nastaveny stejně v obou programech!
byte adresaPrijimac[]= "prijimac00";
byte adresaVysilac[]= "vysilac00";
void setup() {
  // komunikace přes sériovou linku rychlostí 9600 baud
  Serial.begin(9600);
  // zapnutí komunikace nRF modulu
  nRF.begin();
  nRF.setDataRate( RF24_250KBPS );
  // nastavení výkonu nRF modulu,
  // možnosti jsou RF24_PA_MIN, RF24_PA_LOW, RF24_PA_HIGH and RF24_PA_MAX,
  // pro HIGH a MAX je nutnýv externí 3,3V zdroj
  nRF.setPALevel(RF24_PA_LOW);
  // nastavení zapisovacího a čtecího kanálu
  nRF.openWritingPipe(adresaVysilac);
  nRF.openReadingPipe(1,adresaPrijimac);
  // začátek příjmu dat
  nRF.startListening();
}

void loop() {
  // for smyčka pro postupné odeslání
  // hodnot 0 až 3 pro načtení všech dat
  // z přijímače
  for (int i=0; i &lt; 4; i++ ) {
    // ukončení příjmu dat
    nRF.stopListening();
    // vytisknutí aktuální volby po sériové lince
    Serial.print("Posilam volbu ");
    Serial.println(i);
    // uložení startovního času komunikace
    unsigned long casZacatek = micros();
    // odeslání aktuální volby, v případě selhání
    // vytištění chybové hlášky na sériovou linku
    if (!nRF.write( &i, sizeof(i) )){
       Serial.println("Chyba při odeslání!");
    }
    nRF.startListening();
    unsigned long casCekaniOdezvy = micros();
    boolean timeout = false;
    while ( ! nRF.available() ){
    if (micros() - casCekaniOdezvy > 200000 ){
          timeout = true;
          break;
      }      
    }
    if ( timeout ){
      Serial.println("Chyba při prijmu, vyprseni casu na odezvu!");
    }
    else{
     
        unsigned long prijataData;
        nRF.read( &prijataData, sizeof(prijataData) );
        unsigned long casKonec = micros();
        Serial.print("Odeslana volba: ");
        Serial.print(i);
        Serial.print(", prijata data: ");
        Serial.println(prijataData);
        Serial.print("Delka spojeni: ");
        Serial.print(casKonec - casZacatek);
        Serial.println(" mikrosekund.");
    }
    delay(200);
  }
}
</pre>   
<h3><font color="#CB4335">Modtagertester</font> <font color="red">(Dette er ikke et program til Airsoft WiFi-projektet! - Projektet er betalt)</font></h3>					   
<pre style="background: #CB4335;">
//nRF24L01 + PA + LNA - Receiver tester
//Author: Martin Chlebovec (martinius96)
//Web: https://arduino.php5.sk
//Donate: https://paypal.me/chlebovec

#include &lt;SPI.h>
#include "RF24.h"
int prijem;
const int buzzer = 2;
#define CE 4
#define CS 3
RF24 nRF(CE, CS);
byte adresaPrijimac[] = "prijimac00";
byte adresaVysilac[] = "vysilac00";
void setup() {
  Serial.begin(9600);
  pinMode(buzzer, OUTPUT);
  nRF.begin();
  nRF.setDataRate( RF24_250KBPS );
  nRF.setPALevel(RF24_PA_LOW);
  nRF.openWritingPipe(adresaPrijimac);
  nRF.openReadingPipe(1, adresaVysilac);
  nRF.startListening();
}

void loop() {
  unsigned long odezva;
  if ( nRF.available()) {
    // čekání na příjem dat
    while (nRF.available()) {
      nRF.read( &prijem, sizeof(prijem) );
    }
    Serial.print("Prijata volba: ");
    Serial.print(prijem);
    switch ( prijem ) {
      case 1:

        odezva = millis();

        tone(buzzer, 50, 500);

        break;
      case 2:
        odezva = millis() / 1000;
        break;
      case 3:
        odezva = micros();
        break;
      default:
        odezva = 0;
        break;
    }
    nRF.stopListening();
    nRF.write( &odezva, sizeof(odezva) );
    nRF.startListening();
  }
}
</pre>       



</div>
		</div>
</div>
</body>
</html>
