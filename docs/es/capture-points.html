<!DOCTYPE html>
<html lang="es">
<head>
	<!-- Primary Meta Tags -->
	<title>Puntos WiFi nRF24L01 + Arduino para Airsoft | paintball</title>
	<meta name="title" content="Puntos WiFi nRF24L01 + Arduino para Airsoft | paintball">
	<meta name="description" content="Puntos WiFi para Airsoft, Paintball. Modo de captura de puntos de juego, puntos que se comunican hasta 1100 metros.">
	<link rel="icon" type="image/png" href="https://martinius96.github.io/termostat-ethernet/favicon.png">
	<link rel="sitemap" type="application/xml" title="Sitemap" href="../../sitemap.xml" />
	
	<meta name="google-site-verification" content="UwZZh2EXv3iWUAi_1Z0hLxVCz6ySJ4UdY_BPoLtejwo" />    	
	<meta property='fb:admins' content='100001242570317'>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript">
    		window.smartlook||(function(d) {
    			var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
    			var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
    			c.charset='utf-8';c.src='https://rec.smartlook.com/recorder.js';h.appendChild(c);
    		})(document);
    		smartlook('init', 'db50efe9fff280a17db52b82be221240cbbd3dbe');
	</script>    
<style>
	 h1 {
		font-size: 1.5em;
	}
	 h2 {
		font-size: 1.17em;
	}
.aa_h2{
  font:100 5rem/1 Roboto;
  text-transform: uppercase;
}
table{
   background: #fff;
}
table,thead,tbody,tfoot,tr, td,th{
  text-align: center;
  margin: auto;
  border:1px solid #dedede;
  padding: 1rem;
  width: 50%;
}
.table    { display: table; width: 100%; }
.tr       { display: table-row;  }
.thead    { display: table-header-group }
.tbody    { display: table-row-group }
.tfoot    { display: table-footer-group }
.col      { display: table-column }
.colgroup { display: table-column-group }
.td, .th   { display: table-cell; width: 50%; }
.caption  { display: table-caption }

.table,
.thead,
.tbody,
.tfoot,
.tr,
.td,
.th{
  text-align: center;
  margin: auto;
  padding: 1rem;
}
.table{
  background: #fff;
  margin: auto;
  border:none;
  padding: 0;
}

.th{
  font-weight: 700;
  border:1px solid #dedede;
  &:nth-child(odd){
    border-right:none;
  }
}
.td{
  font-weight: 300;
  border:1px solid #dedede;
  border-top:none;
  &:nth-child(odd){
    border-right:none;
  }
}

.aa_htmlTable{
  background: tomato;
  padding: 5rem;
  display: table;
  width: 100%;
  height: 100vh;
  vertical-align: middle;
}
.aa_css{
  background: skyblue;
  padding: 5rem;
  display: table;
  width: 100%;
  height: 100vh;
  vertical-align: middle;
}

.aa_ahmadawais{
  display: table;
  width: 100%;
  font: 100 1.2rem/2 Roboto;
  margin: 5rem auto;
}
    
  </style>
</head>
<body>
	<div class="container">
		<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <ul class="nav navbar-nav">
      	<li><a href="index.html">DOMINADOR RFID</a></li>
<li class=""><a href="dominator-encoder.html">Configurable DOMINADOR</a></li>
<li><a href="button-dominator.html">Botón DOMINADOR</a></li> 
<li class="active"><a href="capture-points.html">Puntos WiFi</a></li>
<a href="../index.html"><img src="https://futbalovysen.sk/wp-content/uploads/slovakia.png" alt="Slovak flag.png, 2,2kB" title="Slovakia" height="32" width="32"></a>
<a href="../de/index.html"><img src="https://futbalovysen.sk/wp-content/uploads/germany.png" alt="Germany.png, 2,2kB" title="Germany" height="32" width="32"></a>
<a href="../ru/index.html"><img src="https://futbalovysen.sk/wp-content/uploads/russia.png" alt="russia.png, 2,2kB" title="Russia" height="32" width="32"></a>	
<a href="../en/index.html"><img src="https://i2.wp.com/facsusa.com/wp-content/uploads/2017/05/Flag-of-England.png?ssl=1" alt="English.png, 2,2kB" title="English" height="32" width="32"></a>
<a href="../pl/index.html"><img src="https://i.imgur.com/OteBe4t.png" alt="poland.png, 2,2kB" title="Poland" height="32" width="32"></a>
<a href="../fr/index.html"><img src="https://i.imgur.com/vX7NaZ7.png" alt="Frenxh.png, 2,2kB" title="French" height="32" width="32"></a>
<!---
<a href="it/capture-points.html"><img src="https://www.flaticon.com/premium-icon/icons/svg/3015/3015784.svg" alt="Italy.png, 2,2kB" title="Italy" height="32" width="32"></a>
<a href="da/capture-points.html"><img src="https://image.flaticon.com/icons/svg/555/555607.svg" alt="Danish.png, 2,2kB" title="Danish" height="32" width="32"></a>	    			    
--->
</div>
</nav>  
  		<div class="row">
    			<div class="col-sm-12">
<div class="alert alert-success">
	<strong>Repositorio con implementaciones de software de prueba para puntos de Airsoft: </strong><a href="https://github.com/martinius96/Capture_Points_Arduino_nRF24L01_Airsoft_Paintball">Airsoft - Puntos WiFi - Arduino</a>
</div>	
<div class="alert alert-danger">
	<strong>El firmware está disponible de forma gratuita</strong>
</div>					
<span class="label label-default">Arduino</span>
<span class="label label-primary">DOMINATOR</span>
<span class="label label-success">WiFi</span>
<span class="label label-info">Cronógrafo</span>
<span class="label label-warning">Esquema</span>
<span class="label label-danger">Botón</span>
<span class="label label-default">Capture Points</span>
<span class="label label-primary">Paintball</span>
<hr><center><h1>Puntos WiFi para Airsoft paintball</h1></center><hr>
<h2>Entidades en el proyecto de puntos WiFi:</h2><hr>
 <div class="row">
  <div class="col-sm-6"><center><img src="https://i.imgur.com/2uGic8e.png" width="128px" height="128px" style="border-radius: 50%;" alt="Tím RED - tlačidlo pre používateľský vstup" title="Tím RED - tlačidlo pre používateľský vstup"><br><b><font color="#C0392B">El equipo RED</font></b></center></div>
  <div class="col-sm-6"><center><img src="https://i.imgur.com/etKbK4l.png" width="128px" height="128px" style="border-radius: 50%;" alt="Tím GRE - tlačidlo pre používateľský vstup" title="Tím GRE - tlačidlo pre používateľský vstup"><br><b><font color="#27AE60">TEl equipo GRE</font></b></center></div>
</div>
<hr>
<h4>Descripción del proyecto puntos WiFi:</h4>
<hr>
<p style="text-align: justify;">
El modo de juego Capture Points es adecuado para deportes de Airsoft y Paintball.
Los puntos se comunican entre sí a través de módulos WiFi nRF24L01, mientras intercambian información sobre el estado del punto (si está ocupado y por qué equipo).
El primer punto opera en modo transmisor permanente y espera una respuesta del segundo punto después de que se transmite la información.
El segundo punto funciona en modo receptor y responde a la recepción de los datos del transmisor (callback).
Este mecanismo de comunicación evita colisiones.
La situación de que ambos puntos transmitieran simultáneamente y no pudieran recibir la información no es tan peligrosa.
Cada uno de los puntos utiliza un microcontrolador de control Arduino (Arduino Uno/Nano) o un chip separado (Atmel) ATmega328P, que controla la lógica de las pulsaciones de botones.
Hay 2 equipos en el juego: <b> <font color = "#C0392B"> equipo RED </font> </b> y <b> <font color = "#27AE60"> equipo GRE </font> </b> que juegan uno contra el otro e intentan ocupar ambos puntos presionando el botón correspondiente.
La entrada del botón indica la acción de ocupar un punto por parte de un miembro del equipo RED o GRE.
Los botones de conmutación conectados en el modo INPUT_PULLUP se utilizan, se conectan a tierra (señal activa baja).
<b> El tiempo de espera/número de pulsaciones no se verifica en la implementación de software disponible. El punto responde inmediatamente cuando se presiona el botón sin pausa. </b>
</p>
<hr>
<p style="text-align: justify;">
El juego termina cuando ambos puntos están ocupados por el mismo equipo.
Un cambio de punto se indica mediante un detector que emite un pitido cada vez que se presiona un botón.
Al final del juego, ambos detectores emiten un pitido en un bucle sin fin. Al mismo tiempo, se interrumpirá la comunicación WiFi entre los módulos nRF24L01 para que no se transmita más información y el resultado del juego sea definitivo.
Los módulos WiFi nRF24L01 (versión sin + PA + LNA) se comunican a unos 70 metros, nRF24l01 + PA + LNA también por kilómetro, respectivamente en el bosque y en otro entorno perturbado a un nivel de 450-700 metros con una potencia de transmisión máxima de 1 mW .
Con fuente de alimentación externa, es posible utilizar el adaptador YL-105 con un convertidor de 3,3 V y alimentarlo a través de un adaptador externo en el rango de 5 a 18 V.
No se recomienda la fuente de alimentación de 5V del Arduino, ya que amenaza con destruir el controlador, ya que no puede suministrar la corriente necesaria para obtener la máxima potencia.
Al alimentar el nRF24L01 a través de un terminal Arduino 3V3, es posible suministrar la potencia de transmisión más baja de 0,0158 mW.
Ambos puntos se reinician reiniciando el botón de Arduino, o extrayendo y conectando la fuente de alimentación (ciclo de encendido).
<b> Teóricamente, los puntos WiFi se pueden extender a 8 puntos (8 pipelines), que se comunican entre sí, respectivamente. solo pueden comunicarse con el transmisor según la lógica propuesta.
Sin embargo, es necesario agregar un identificador para cada punto para distinguirlos.
El transmisor que inicia la comunicación puede así distinguir la ocupación del equipo en todos los puntos WiFi que se implementen en el sistema.
Al transmitir una mayor cantidad de datos, también es posible utilizar una estructura en la que es posible transmitir varios tipos de datos simultáneamente como un paquete.
El punto de recepción puede así obtener datos de la estructura esperada en función del tamaño de los tipos de datos individuales.
</b>
</p>
<div class="alert alert-info">
  <strong>Los módulos inalámbricos se comunican a 2,4 GHz. </strong> Los módulos tienen su propio canal de comunicación con una selección de hasta 140 canales.
</div>
<hr>
<h4>Velocidades de módulo admitidas nRF24L01:</h4> 
<hr>
<li>250 kbps - <font color="red"><b>Esta opción no es compatible con nRF24L01 anterior!</b></font></li>
<li>1 Mbps</li>
<li>2 Mbps</li>
<hr>
<h4>Modos de potencia de los módulos nRF24L01:</h4> 
<hr>
<li>RF24_PA_MIN = -18 dBm --> 0,0158 mW</li> 
<li>RF24_PA_LOW = -12 dBm --> 0,0631 mW</li>
<li>RF24_PA_MED = -6 dBm --> 0,2512 mW</li>
<li>RF24_PA_HIGH = 0 dBm --> 1 mW</li>
<hr>
<h4>Diagrama de bloques - Puntos WiFi - Airsoft:</h4>
<hr>
<center><img src="https://i.imgur.com/hglnwgX.jpg" style="display: block; max-width: 100%; height: auto;" alt="Bloková schéma / Block scheme - Capture Points - Airsoft / Paintball, Arduino, nRF24L01" title="Bloková schéma / Block scheme - Capture Points - Airsoft / Paintball, Arduino, nRF24L01"></center>	
<hr><h4>Hardware de control compatible para puntos WiFi Airsoft:</h4><hr>
<div class="row">
<div class="col-sm-3"><center><img src="https://i.imgur.com/wtnzKqO.png" width="128px" height="128px" style="border-radius: 50%;" alt="Control microcontroller Arduino UNO for Domination Timer" title="Control microcontroller Arduino UNO for Domination Timer"><br><b><a href="https://www.ebay.com/itm/254532156570">Arduino UNO</a></b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/XHC8DBe.png" width="128px" height="128px" style="border-radius: 50%;" alt="Control microcontroller Arduino Nano for Domination Timer" title="Control microcontroller Arduino Nano for Domination Timer"><br><b><a href="https://www.ebay.com/itm/252742123829">Arduino Nano</a></b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/4xX0BoE.png" width="128px" height="128px" style="border-radius: 50%;" alt="Control microcontroller AtMega328P DIP" title="Control microcontroller AtMega328P DIP"><br><b><a href="https://www.ebay.com/itm/292204064766">AtMega328P - DIP28</a></b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/FANTMuW.png" width="128px" height="128px" style="border-radius: 50%;" alt="Control microcontroller AtMega328P SMD" title="Control microcontroller AtMega328P SMD"><br><b><a href="https://www.ebay.com/itm/142666414237">AtMega328P - SMD</a></b></center></div>
</div>	
<hr><h4>Periféricos para puntos WiFi Airsoft:</h4><hr>
<div class="row">
<div class="col-sm-3"><center><img src="https://i.imgur.com/1cykMkD.png" width="128px" height="128px" style="border-radius: 50%;" alt="2x WiFi module nRF24L01 / nRF24L01 + PA + LNA" title="2x WiFi module nRF24L01 / nRF24L01 + PA + LNA"><br><b>2x WiFi module nRF24L01 / nRF24L01 + PA + LNA</b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/9P3aF98.png" width="128px" height="128px" style="border-radius: 50%;" alt="Pushbutton (pushbutton)" title="Pushbutton (pushbutton)"><br><b>4x Pushbutton</b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/HPRdfXo.png" width="128px" height="128px" style="border-radius: 50%;" alt="Buzzer" title="Buzzer"><br><b>2x Buzzer</b></center></div>
<div class="col-sm-3"><center><img src="https://i.imgur.com/Tz3cwNZ.png" width="128px" height="128px" style="border-radius: 50%;" alt="2x LEDs" title="2x LEDs"><br><b>4x LEDs</b></center></div>
</div>
<hr><center><h3>Diagrama de cableado - Puntos WiFi</h3></center><hr>
<center><img src="https://i.imgur.com/noWoy6S.png" style="display: block; max-width: 100%; height: auto;" alt="WiFi body - DOMINATOR - schéma zapojenia - Arduino / Airsoft, stopwatch, DOMINATION" title="WiFi body - - schéma zapojenia - Arduino / Airsoft, stopwatch, DOMINATION"></center>        			
<hr><center><h3>Puntos WiFi - conexión de prueba</h3></center><hr>
<center><img src="https://i.imgur.com/bx6mj2V.png" style="display: block; max-width: 100%; height: auto;" alt="WiFi body - - Arduino pre Airsoft, Paintball" title="WiFi body - - Arduino pre Airsoft, Paintball"></center>        			
<hr><h3>WiFi body - Capture Points - Ukážka funkčnosti:</h3><hr>
<center><iframe width="80%" height="315" src="https://www.youtube.com/embed/SFTyy0cOauU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center>
<h3>El cableado de los terminales - puntos WiFi - corresponde completamente al diagrama de cableado:</h3>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>		
<tr>
<td align="left" style="background-color:#C0392B"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#C0392B">nRF24L01<strong></strong></td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">GND</td>
<td align="right" style="background-color:#C0392B">GND</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">3V3 / fuente externa</td>
<td align="right" style="background-color:#C0392B">Vcc</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">D3</td>
<td align="right" style="background-color:#C0392B">CSN</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">D4</td>
<td align="right" style="background-color:#C0392B">CE</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">D11</td>
<td align="right" style="background-color:#C0392B">MOSI</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">D12</td>
<td align="right" style="background-color:#C0392B">MISO</td>
</tr>
<tr>
<td align="left" style="background-color:#C0392B">D13</td>
<td align="right" style="background-color:#C0392B">SCK</td>
</tr>
<tr>
<td align="left" style="background-color:#F8C471"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#F8C471"><strong>LED diods</strong></td>
</tr>
<tr>
<td align="left" style="background-color:#F8C471">GND</td>
<td align="right" style="background-color:#F8C471">GND</td>
</tr>
<tr>
<td align="left" style="background-color:#F8C471">D7</td>
<td align="right" style="background-color:#F8C471">IN (RED)</td>
</tr>
<tr>
<td align="left" style="background-color:#F8C471">D8</td>
<td align="right" style="background-color:#F8C471">IN (GREEN)</td>
</tr>
<td align="left" style="background-color:#5DADE2"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#5DADE2"><strong>Botones (INPUT_PULLUP)</strong></td>
</tr>
<tr>
<td align="left" style="background-color:#5DADE2">GND</td>
<td align="right" style="background-color:#5DADE2">GND</td>
</tr>
<tr>
<td align="left" style="background-color:#5DADE2">D5</td>
<td align="right" style="background-color:#5DADE2">IN (RED)</td>
</tr>
<tr>
<td align="left" style="background-color:#5DADE2">D6</td>
<td align="right" style="background-color:#5DADE2">IN (GRE)</td>
</tr>
<td align="left" style="background-color:#AF7AC5"><strong>Arduino Uno / Nano (AtMega328P)</strong></td>
<td align="right" style="background-color:#AF7AC5"><strong>Zumbador</strong></td>
</tr>
<tr>
<td align="left" style="background-color:#AF7AC5">D2</td>
<td align="right" style="background-color:#AF7AC5">IO</td>
</tr>
<tr>
<td align="left" style="background-color:#AF7AC5">GND</td>
<td align="right" style="background-color:#AF7AC5">GND</td>
</tr>
</tbody>
</table>				
</div>
<hr><center><h4>Bibliotecas disponibles para microcontroladores (Arduino)</h4></center><hr>
<div class="alert alert-danger">
	Archivo de la biblioteca (.zip) expandir a <strong>C:/Users/[User]/Documents/Arduino/libraries</strong>
</div>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>
<tr>
<th style="width: 25%">El nombre de la biblioteca</th>
<th style="width: 50%">Función de biblioteca</th>
<th style="width: 25%">Descargar</th>
</tr>
</thead>
<tbody>
<tr>
<td style="width: 25%"><b>RF24</b></td>
<td style="width: 50%">
<p style="text-align: justify;">
Biblioteca para microcontroladores AVR (ATmega) Arduino Uno / Nano / Mega.
Permite controlar módulos WiFi nRF24L01 (nRF24L01 + PA + LNA) comunicándose vía bus SPI.
</p>
</td>
<td style="width: 25%"><a href="https://minhaskamal.github.io/DownGit/#/home?url=https://github.com/martinius96/Capture_Points_Arduino_nRF24L01_Airsoft_Paintball/tree/master/src/RF24" class="btn btn-success" role="button">Descargar</a></td>
</tr>
</tbody>
</table>
</div>
<hr><center><h2>Programa - Puntos WiFi</h2></center>
<hr>
<h3><font color="#2ECC71">Programa - NODO 1 (transmisor permanente)</font></h3>					   
<hr>
<pre style="background: #2ECC71;">
// nRF24L01 transmitter
#include &lt;SPI.h>
#include "RF24.h"
#define CE 4
#define CS 3
RF24 nRF(CE, CS);
int response = 8;
int received = 12;
const int buzzer = 2;
const int red_team = 5;
const int blue_team = 6;
const int red_led = 7;
const int blue_led = 8;
byte adresaPrijimac[] = "prijimac00";
byte adresaVysilac[] = "vysilac00";
void setup() {
  Serial.begin(9600);
  pinMode(buzzer, OUTPUT);
  pinMode(red_led, OUTPUT);
  pinMode(blue_led, OUTPUT);
  pinMode(red_team, INPUT_PULLUP);
  pinMode(blue_team, INPUT_PULLUP);
  nRF.begin();
  nRF.setDataRate( RF24_250KBPS );
  nRF.setPALevel(RF24_PA_LOW);
  nRF.openWritingPipe(adresaVysilac);
  nRF.openReadingPipe(1, adresaPrijimac);
  nRF.startListening();
}

void loop() {
  if (response == received) {
    tone( buzzer, 900, 800);
    delay(1000);
  } else {
    nRF.stopListening();
    int output_red = digitalRead(red_team);
    int output_blue = digitalRead(blue_team);
    if (output_red == LOW) {
      response = 1;
      digitalWrite(red_led, HIGH);
      digitalWrite(blue_led, LOW);
    } else if (output_blue == LOW) {
      response = 2;
      digitalWrite(red_led, LOW);
      digitalWrite(blue_led, HIGH);
    }
    nRF.write( &response, sizeof(response) );
    nRF.startListening();
    while (nRF.available()) {
      nRF.read( &received, sizeof(received) );
    }
    Serial.println("Received datas: ");
    Serial.println(received);
    Serial.println("Response: ");
    Serial.println(response);
    delay(50);
  }
}
</pre>   
<hr>
<h3><font color="#CB4335">Programa - NODO 2 (receptor permanente con devolución de llamada al transmisor)</font></font></h3>					   
<hr>
<pre style="background: #CB4335;">
// nRF24L01 receiver
#include &lt;SPI.h>
#include "RF24.h"
int response = 3;
int received = 4;
const int buzzer = 2;
const int red_team = 5;
const int blue_team = 6;
const int red_led = 7;
const int blue_led = 8;
#define CE 4
#define CS 3
RF24 nRF(CE, CS);
byte adresaPrijimac[] = "prijimac00";
byte adresaVysilac[] = "vysilac00";
void setup() {
  Serial.begin(9600);
  pinMode(buzzer, OUTPUT);
  pinMode(red_led, OUTPUT);
  pinMode(blue_led, OUTPUT);
  pinMode(red_team, INPUT_PULLUP);
  pinMode(blue_team, INPUT_PULLUP);
  nRF.begin();
  nRF.setDataRate( RF24_250KBPS );
  nRF.setPALevel(RF24_PA_LOW);
  nRF.openWritingPipe(adresaPrijimac);
  nRF.openReadingPipe(1, adresaVysilac);
  nRF.startListening();
}

void loop() {
  if (response == received) {
    tone( buzzer, 900, 800);
    delay(1000);
  } else {
    if ( nRF.available()) {
      while (nRF.available()) {
        nRF.read( &received, sizeof(received) );
      }
      Serial.println("Received datas:: ");
      Serial.println(received);
      Serial.println("Response: ");
      Serial.println(response);
      nRF.stopListening();
      int output_red = digitalRead(red_team);
      int output_blue = digitalRead(blue_team);
      if (output_red == LOW) {
        response = 1;
        digitalWrite(red_led, HIGH);
        digitalWrite(blue_led, LOW);
      } else if (output_blue == LOW) {
        response = 2;
        digitalWrite(red_led, LOW);
        digitalWrite(blue_led, HIGH);
      }
      nRF.write( &response, sizeof(response) );
      nRF.startListening();
    }
  }
}
</pre>       



</div>
		</div>
</div>
</body>
</html>
